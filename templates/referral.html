<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ - SaaSPro</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        .header {
            background: white;
            border-radius: 30px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            text-align: center;
        }
        .header h1 {
            font-size: 32px;
            color: #333;
            margin-bottom: 10px;
        }
        .header p {
            color: #666;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
        }
        .stat-value {
            font-size: 36px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }
        .stat-label {
            color: #666;
            font-size: 14px;
        }
        
        .referral-box {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .referral-box h2 {
            font-size: 20px;
            margin-bottom: 15px;
            color: #333;
        }
        .link-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .referral-link {
            flex: 1;
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 12px;
            font-family: monospace;
            font-size: 16px;
        }
        .btn-copy {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
        }
        
        .bonus-info {
            background: #f0f3ff;
            border-radius: 15px;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        .bonus-amount {
            font-size: 28px;
            font-weight: bold;
            color: #4caf50;
        }
        .btn-withdraw {
            background: #4caf50;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
        }
        
        .table-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th {
            text-align: left;
            padding: 12px;
            background: #f8f9fa;
            color: #666;
            font-weight: 600;
        }
        td {
            padding: 12px;
            border-bottom: 1px solid #eee;
            color: #333;
        }
        .badge-active {
            background: #4caf50;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
        }
        .badge-pending {
            background: #ff9800;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
        }
        
        .how-it-works {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .steps {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }
        .step {
            text-align: center;
        }
        .step-number {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
        }
        
        .back-link {
            display: inline-block;
            margin-top: 20px;
            color: white;
            text-decoration: none;
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéÅ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞</h1>
            <p>–ü—Ä–∏–≥–ª–∞—à–∞–π—Ç–µ –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –±–æ–Ω—É—Å—ã –Ω–∞ —Å—á—ë—Ç</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value">5</div>
                <div class="stat-label">–ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">3</div>
                <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">1 500 ‚ÇΩ</div>
                <div class="stat-label">–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</div>
            </div>
        </div>

        <div class="referral-box">
            <h2>üîó –í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞</h2>
            <div class="link-container">
                <input type="text" class="referral-link" id="referralLink" value="https://saaspro.ru/ref/USER123" readonly>
                <button class="btn-copy" onclick="copyLink()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
            
            <div class="bonus-info">
                <span>–î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –≤—ã–≤–æ–¥–∞:</span>
                <span class="bonus-amount">1 200 ‚ÇΩ</span>
                <button class="btn-withdraw" onclick="withdraw()">–í—ã–≤–µ—Å—Ç–∏</button>
            </div>
        </div>

        <div class="table-section">
            <h2 style="margin-bottom: 20px;">üìã –ü—Ä–∏–≥–ª–∞—à—ë–Ω–Ω—ã–µ –¥—Ä—É–∑—å—è</h2>
            <table>
                <thead>
                    <tr>
                        <th>–î–∞—Ç–∞</th>
                        <th>Email</th>
                        <th>–°—Ç–∞—Ç—É—Å</th>
                        <th>–ë–æ–Ω—É—Å</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>15.03.2024</td>
                        <td>alex@example.com</td>
                        <td><span class="badge-active">–ê–∫—Ç–∏–≤–µ–Ω</span></td>
                        <td>300 ‚ÇΩ</td>
                    </tr>
                    <tr>
                        <td>10.03.2024</td>
                        <td>maria@example.com</td>
                        <td><span class="badge-active">–ê–∫—Ç–∏–≤–µ–Ω</span></td>
                        <td>300 ‚ÇΩ</td>
                    </tr>
                    <tr>
                        <td>05.03.2024</td>
                        <td>ivan@example.com</td>
                        <td><span class="badge-pending">–û–∂–∏–¥–∞–µ—Ç</span></td>
                        <td>‚Äî</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="how-it-works">
            <h2>üìå –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <h3>–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å—Å—ã–ª–∫–æ–π</h3>
                    <p>–û—Ç–ø—Ä–∞–≤—å—Ç–µ –¥—Ä—É–∑—å—è–º</p>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <h3>–î—Ä—É–≥ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è</h3>
                    <p>–°–æ–∑–¥–∞—ë—Ç –∞–∫–∫–∞—É–Ω—Ç</p>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <h3>–ü–æ–ª—É—á–∞–µ—Ç–µ 300 ‚ÇΩ</h3>
                    <p>–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –æ–ø–ª–∞—Ç—ã</p>
                </div>
            </div>
        </div>

        <a href="/dashboard-improved" class="back-link">‚Üê –í –¥–∞—à–±–æ—Ä–¥</a>
    </div>

    <script>
        function copyLink() {
            const link = document.getElementById('referralLink');
            link.select();
            navigator.clipboard.writeText(link.value);
            alert('‚úÖ –°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!');
        }

        function withdraw() {
            if (confirm('–í—ã–≤–µ—Å—Ç–∏ 1 200 ‚ÇΩ –Ω–∞ –∫–∞—Ä—Ç—É?')) {
                alert('‚úÖ –ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞. –°—Ä–µ–¥—Å—Ç–≤–∞ –ø–æ—Å—Ç—É–ø—è—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 3 –¥–Ω–µ–π.');
            }
        }
    </script>
<script>
    const userId = 'test-user-123';

    async function loadStats() {
        const response = await fetch(`/api/referral/stats?user_id=${userId}`);
        const data = await response.json();
        if (data.success) {
            document.querySelector('.stat-value:nth-child(1)').textContent = data.stats.invited;
            document.querySelector('.stat-value:nth-child(2)').textContent = data.stats.active;
            document.querySelector('.stat-value:nth-child(3)').textContent = data.stats.earned + ' ‚ÇΩ';
            document.querySelector('.bonus-amount').textContent = data.stats.available + ' ‚ÇΩ';
        }
    }

    async function loadFriends() {
        const response = await fetch(`/api/referral/friends?user_id=${userId}`);
        const data = await response.json();
        // –ó–¥–µ—Å—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
    }

    loadStats();
    loadFriends();
</script>

</body>
</html>